graph TB
    subgraph "Client Layer"
        UI[React Frontend<br/>Vite + TypeScript<br/>Port: 5173]
        DM[Dark Mode Toggle]
        UI --> DM
    end

    subgraph "Presentation Layer"
        LP[Landing Page]
        CR[Career Recommendation Page]
        IP[Insights Page<br/>XAI Analysis]
        CE[Career Evolution Page]
        RMP[Roadmap Display]
        
        UI --> LP
        UI --> CR
        UI --> IP
        UI --> CE
        UI --> RMP
    end

    subgraph "API Gateway"
        PROXY[Vite Dev Proxy<br/>CORS Handler]
        API[FastAPI Server<br/>Port: 8000]
        PROXY --> API
    end

    subgraph "Core Services Layer"
        subgraph "Career Prediction Service"
            CP[Career Predictor]
            T3P[Top 3 Careers Predictor]
            ML1[Random Forest Model<br/>Scikit-learn]
            
            CP --> ML1
            T3P --> ML1
        end
        
        subgraph "Career Evolution Service"
            CEP[Career Evolution Predictor]
            TRANS[Transformer Model<br/>Multi-Head Attention]
            LSTM[LSTM Fallback Model]
            TP[Time Prediction Model]
            
            CEP --> TRANS
            CEP -.Fallback.-> LSTM
            CEP --> TP
        end
        
        subgraph "Explainability Service (XAI)"
            SHAP[SHAP Explainer]
            CF[Counterfactual Generator]
            RC[Role Comparator]
            VIZ[Visualization Generator]
            
            SHAP --> VIZ
        end
        
        subgraph "Career Roadmap Service"
            RG[Roadmap Generator]
            KB[Knowledge Base]
            
            RG --> KB
        end
        
        subgraph "Resume Analysis Service"
            RP[Resume Parser<br/>NLP Engine]
            RA[Resume Analyzer<br/>SBERT Embeddings]
            GA[Gap Analyzer]
            RPG[PDF Report Generator]
            
            RP --> RA
            RA --> GA
            RA --> RPG
        end
        
        subgraph "Model Visualization Service"
            MA[Model Architecture Extractor]
            MV[Model Visualizer]
            
            MA --> MV
        end
    end

    subgraph "Data Processing Layer"
        FE[Feature Engineering]
        EN[Encoders<br/>Label/OneHot]
        SC[Scalers<br/>StandardScaler]
        
        FE --> EN
        FE --> SC
    end

    subgraph "Data Layer"
        DS[Career Dataset<br/>roo.csv<br/>28 Features]
        MM[Trained Models<br/>.h5 Files]
        STATIC[Static Files<br/>SHAP Plots]
        
        DS -.Training Data.-> ML1
        DS -.Training Data.-> TRANS
        DS -.Training Data.-> LSTM
        MM --> CEP
        STATIC --> VIZ
    end

    subgraph "NLP & ML Libraries"
        SPACY[spaCy<br/>Text Processing]
        SBERT[Sentence-BERT<br/>Semantic Similarity]
        TF[TensorFlow/Keras<br/>Deep Learning]
        SK[Scikit-learn<br/>Traditional ML]
        SHLIB[SHAP Library<br/>Model Interpretation]
        
        RP --> SPACY
        RA --> SBERT
        CEP --> TF
        CP --> SK
        SHAP --> SHLIB
    end

    subgraph "External File Processing"
        PDF[PDF Parser<br/>PyPDF2/pdfplumber]
        DOCX[DOCX Parser<br/>python-docx]
        IMG[Image Generator<br/>Matplotlib/Plotly]
        
        RP --> PDF
        RP --> DOCX
        VIZ --> IMG
    end

    %% API Connections
    UI -.HTTP POST.-> PROXY
    PROXY -."/predict_top3_careers".-> T3P
    PROXY -."/predict_career_evolution".-> CEP
    PROXY -."/xai_explanations/{role}".-> SHAP
    PROXY -."/xai_counterfactual/{role}".-> CF
    PROXY -."/xai_compare_roles".-> RC
    PROXY -."/career_roadmap/{role}".-> RG
    PROXY -."/upload_resume".-> RP
    PROXY -."/analyze_resume_for_role".-> RA
    PROXY -."/compare_resume_with_roadmap".-> GA
    PROXY -."/api/analyze_resume".-> RA
    PROXY -."/model_architecture".-> MA
    PROXY -."/model_architecture/visualization".-> MV
    
    %% Data Flow
    CR -.User Input<br/>28 Features.-> FE
    FE --> T3P
    FE --> CEP
    FE --> SHAP
    
    T3P -.Top 3 Predictions.-> IP
    T3P -.Selected Career.-> CE
    CEP -.Future Roles.-> CE
    SHAP -.Explanations.-> IP
    RG -.Skills/Certs/Projects.-> RMP
    
    %% Styling
    classDef frontend fill:#61DAFB,stroke:#000,stroke-width:2px,color:#000
    classDef backend fill:#009688,stroke:#000,stroke-width:2px,color:#fff
    classDef ml fill:#FF6F00,stroke:#000,stroke-width:2px,color:#fff
    classDef data fill:#4CAF50,stroke:#000,stroke-width:2px,color:#fff
    classDef nlp fill:#9C27B0,stroke:#000,stroke-width:2px,color:#fff
    
    class UI,DM,LP,CR,IP,CE,RMP frontend
    class API,PROXY,CP,T3P,CEP,SHAP,CF,RC,RG,RP,RA,GA,MA,MV backend
    class ML1,TRANS,LSTM,TP,VIZ,RPG ml
    class DS,MM,STATIC,FE,EN,SC data
    class SPACY,SBERT,TF,SK,SHLIB,PDF,DOCX,IMG nlp
