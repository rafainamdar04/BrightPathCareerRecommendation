# BrightPath System Architecture & Diagrams

This document provides comprehensive documentation for the BrightPath Career Recommendation System's architecture and design diagrams.

## 📊 Available Diagrams

### 1. System Architecture Diagram
**File:** `system_architecture_detailed.mmd`

**Description:** 
A comprehensive architectural diagram showing the complete system structure with all layers, components, and their interactions.

**Layers Covered:**
- **Client Layer:** React Frontend with Vite and TypeScript
- **Presentation Layer:** All pages (Landing, Career Recommendation, Insights, Evolution, Roadmap)
- **API Gateway:** Vite Dev Proxy and FastAPI Server
- **Core Services Layer:**
  - Career Prediction Service (Random Forest)
  - Career Evolution Service (Transformer + LSTM)
  - Explainability Service (SHAP)
  - Career Roadmap Service
  - Resume Analysis Service (NLP + SBERT)
  - Model Visualization Service
- **Data Processing Layer:** Feature Engineering, Encoders, Scalers
- **Data Layer:** Datasets, Trained Models, Static Files
- **NLP & ML Libraries:** spaCy, SBERT, TensorFlow, Scikit-learn, SHAP
- **External File Processing:** PDF, DOCX parsers, Image generators

**Key Technologies Shown:**
- Frontend: React 18, TypeScript, Vite, TailwindCSS
- Backend: FastAPI, Python
- ML/AI: Random Forest, Transformer, LSTM, SHAP
- NLP: spaCy, Sentence-BERT
- Deep Learning: TensorFlow/Keras
- File Processing: PyPDF2, python-docx, Matplotlib, Plotly

**How to View:**
```bash
# Using Mermaid CLI (if installed)
mmdc -i system_architecture_detailed.mmd -o system_architecture_detailed.png

# Or view online at:
# https://mermaid.live/
```

### 2. Sequence Diagram
**File:** `sequence_detailed.mmd`

**Description:**
A detailed sequence diagram showing all user interactions and system workflows with complete request-response cycles.

**Scenarios Covered:**

#### Scenario 1: Career Prediction & Top 3 Recommendations
- Steps 1-16: User fills form → Feature engineering → ML prediction → Top 3 careers displayed
- **Key Components:** UI, Feature Engineering, Random Forest Model
- **Endpoint:** `POST /predict_top3_careers`

#### Scenario 2: Explainable AI (XAI) Analysis
- Steps 17-30: User requests XAI → SHAP calculation → Feature importance visualization
- **Key Components:** SHAP Explainer, Visualization Generator
- **Endpoint:** `POST /xai_explanations/{role}`
- **Output:** SHAP plots, top influencing factors, impact values

#### Scenario 3: Career Roadmap Generation
- Steps 31-42: User requests roadmap → Knowledge base query → Structured roadmap
- **Key Components:** Roadmap Generator, Knowledge Base
- **Endpoint:** `GET /career_roadmap/{role}`
- **Output:** Skills, Certifications, Projects

#### Scenario 4: Career Evolution Prediction
- Steps 43-58: User requests evolution → Transformer model → Future career stages
- **Key Components:** Transformer (Multi-Head Attention), LSTM Fallback, Time Predictor
- **Endpoint:** `POST /predict_career_evolution`
- **Output:** Current role, 3 future stages, personalized timeframes, confidence scores

#### Scenario 5: Resume Upload & Analysis (NLP-Based)
- Steps 59-84: Resume upload → spaCy NLP parsing → Gap analysis
- **Key Components:** Resume Parser, spaCy, Gap Analyzer
- **Endpoints:** 
  - `POST /upload_resume`
  - `POST /compare_resume_with_roadmap`
- **Output:** Parsed resume, skill gap analysis, recommendations

#### Scenario 6: Advanced Resume Analysis (SBERT Embeddings)
- Steps 85-106: Advanced analysis → SBERT semantic matching → PDF report
- **Key Components:** SBERT, Semantic Similarity Calculator
- **Endpoints:**
  - `POST /api/analyze_resume`
  - `POST /api/analyze_resume/download_report`
- **Output:** Career fit score, keyword coverage, section scores, PDF report

#### Scenario 7: Role Comparison (XAI)
- Steps 107-120: Multiple role selection → SHAP comparison → Side-by-side display
- **Key Components:** SHAP Explainer, Comparison Engine
- **Endpoint:** `POST /xai_compare_roles`
- **Output:** Feature importance comparison, key differences

#### Scenario 8: Model Architecture Visualization
- Steps 121-137: Request model details → Extract architecture → Generate diagram
- **Key Components:** Model Introspection, Architecture Visualizer
- **Endpoints:**
  - `GET /model_architecture`
  - `GET /model_architecture/visualization`
- **Output:** Layer details, parameter counts, architecture diagram

**How to View:**
```bash
# Using Mermaid CLI (if installed)
mmdc -i sequence_detailed.mmd -o sequence_detailed.png

# Or view online at:
# https://mermaid.live/
```

## 🎨 ML/AI Generated Visualizations

The following files are generated by the ML models during training and analysis:

### Training & Model Performance
- **`training_curve.png`** - Model training loss/accuracy curves
- **`confusion_matrix.png`** - Classification confusion matrix
- **`pr_curve.png`** - Precision-Recall curve
- **`correlation_heatmap.png`** - Feature correlation heatmap
- **`data_distribution.png`** - Dataset distribution visualization

### XAI (Explainability) Visualizations
- **`shap_global.png`** - Global SHAP feature importance (PNG)
- **`shap_global.svg`** - Global SHAP feature importance (SVG, scalable)
- **`shap_local.svg`** - Local SHAP explanation for individual predictions

## 🏗️ System Architecture Overview

### High-Level Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                     CLIENT LAYER                             │
│  React Frontend (Vite + TypeScript) - Port 5173            │
└────────────────────┬────────────────────────────────────────┘
                     │ HTTP/REST API
                     ↓
┌─────────────────────────────────────────────────────────────┐
│                   API GATEWAY                                │
│  Vite Dev Proxy → FastAPI Server - Port 8000               │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ↓
┌─────────────────────────────────────────────────────────────┐
│              CORE SERVICES LAYER                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   Career     │  │   Career     │  │     XAI      │     │
│  │  Prediction  │  │  Evolution   │  │  (SHAP)      │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   Roadmap    │  │   Resume     │  │    Model     │     │
│  │  Generator   │  │   Analyzer   │  │     Viz      │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ↓
┌─────────────────────────────────────────────────────────────┐
│            DATA PROCESSING LAYER                             │
│  Feature Engineering → Encoding → Scaling                   │
└────────────────────┬────────────────────────────────────────┘
                     │
                     ↓
┌─────────────────────────────────────────────────────────────┐
│                  DATA LAYER                                  │
│  • roo.csv (28 features)                                    │
│  • Trained Models (.h5)                                     │
│  • Static Files (SHAP plots)                                │
└─────────────────────────────────────────────────────────────┘
```

## 🔄 Data Flow

### 1. Career Prediction Flow
```
User Input (28 features)
    ↓
Feature Engineering (encode + scale)
    ↓
Random Forest Model
    ↓
Top 3 Predictions (with confidence)
    ↓
Display to User
```

### 2. Career Evolution Flow
```
Current Role + User Profile
    ↓
Transformer Model (Multi-Head Attention)
    ↓
Sequence Prediction (3 future roles)
    ↓
Time Prediction Model (personalized timeframes)
    ↓
Career Trajectory with Timeline
    ↓
Display to User
```

### 3. XAI Analysis Flow
```
User Input + Selected Career
    ↓
SHAP Explainer Initialization
    ↓
Calculate SHAP Values
    ↓
Generate Visualization (waterfall/force plot)
    ↓
Extract Top Influencing Features
    ↓
Display Explanation + Plot
```

### 4. Resume Analysis Flow
```
Resume File (PDF/DOCX/TXT)
    ↓
Text Extraction
    ↓
spaCy NLP Pipeline
    ↓
Entity Extraction (Name, Email, Skills, etc.)
    ↓
SBERT Embeddings (optional)
    ↓
Semantic Similarity Matching
    ↓
Gap Analysis + Scoring
    ↓
Display Results + Recommendations
```

## 🛠️ Technology Stack

### Frontend
- **Framework:** React 18
- **Language:** TypeScript
- **Build Tool:** Vite
- **Styling:** TailwindCSS
- **State Management:** React Hooks + Context API
- **HTTP Client:** Fetch API
- **Port:** 5173

### Backend
- **Framework:** FastAPI
- **Language:** Python 3.10+
- **Server:** Uvicorn
- **Port:** 8000
- **API Documentation:** Swagger/OpenAPI (auto-generated)

### Machine Learning
- **Traditional ML:** Scikit-learn (Random Forest)
- **Deep Learning:** TensorFlow/Keras
- **Models:**
  - Random Forest for career prediction
  - Transformer with Multi-Head Attention for evolution
  - LSTM for fallback evolution
  - Time prediction neural network
- **Explainability:** SHAP (SHapley Additive exPlanations)

### NLP
- **Core Library:** spaCy
- **Embeddings:** Sentence-BERT (all-MiniLM-L6-v2)
- **Text Extraction:** PyPDF2, pdfplumber, python-docx
- **Pattern Matching:** Regex + Custom algorithms

### Data Processing
- **Feature Engineering:** Pandas, NumPy
- **Encoding:** LabelEncoder, OneHotEncoder
- **Scaling:** StandardScaler
- **Dataset:** CSV (28 features)

### Visualization
- **Plotting:** Matplotlib, Plotly, Seaborn
- **SHAP Plots:** SHAP library built-in visualizations
- **Model Architecture:** TensorFlow visualization utils

## 📝 API Endpoints Summary

### Career Prediction
- `POST /predict_top3_careers` - Get top 3 career recommendations
- `POST /predict_career_evolution` - Get career evolution trajectory

### Explainability
- `POST /xai_explanations/{role}` - Get SHAP explanations for a role
- `POST /xai_counterfactual/{target_role}` - Get counterfactual explanations
- `POST /xai_compare_roles` - Compare SHAP values between roles

### Roadmap
- `GET /career_roadmap/{role}` - Get career roadmap (skills, certs, projects)

### Resume Analysis
- `POST /upload_resume` - Parse resume using NLP
- `POST /analyze_resume_for_role` - Analyze resume against role requirements
- `POST /compare_resume_with_roadmap` - Compare resume with career roadmap
- `POST /api/analyze_resume` - Advanced SBERT-based analysis
- `POST /api/analyze_resume/download_report` - Generate PDF report

### Model Introspection
- `GET /model_architecture` - Get model architecture details
- `GET /model_architecture/visualization` - Get model diagram

### Static Files
- `GET /static/*` - Serve SHAP visualizations and generated plots

## 🎯 Key Features

### 1. Career Prediction
- **Input:** 28 features (academic scores, skills, preferences)
- **Output:** Top 3 careers with confidence scores
- **Technology:** Random Forest classifier

### 2. Career Evolution (AI-Powered)
- **Input:** Current role + user profile
- **Output:** 3 future career stages with personalized timeframes
- **Technology:** Transformer with Multi-Head Attention
- **Fallback:** LSTM model if Transformer unavailable

### 3. Explainable AI (XAI)
- **Feature:** SHAP-based explanations
- **Output:** Feature importance, waterfall plots, top factors
- **Capabilities:** 
  - Per-role explanations
  - Counterfactual analysis
  - Multi-role comparison

### 4. Career Roadmap
- **Output:** Skills, certifications, projects for target role
- **Source:** Curated knowledge base

### 5. Resume Analysis
- **NLP-Based:** spaCy for entity extraction
- **Advanced:** SBERT for semantic similarity
- **Output:** 
  - Parsed resume data
  - Skill gap analysis
  - Match score (0-100)
  - Actionable recommendations
  - PDF report (optional)

### 6. Model Visualization
- **Architecture Details:** Layer info, parameters, shapes
- **Visual Diagrams:** Neural network structure visualization

## 🔍 Data Flow Patterns

### Synchronous Operations
- Career prediction
- XAI analysis
- Roadmap generation
- Model architecture retrieval

### Asynchronous Operations
- Resume file uploads
- PDF report generation

### Real-time Processing
- Feature engineering
- Model inference
- SHAP value calculation

### Background Processing
- Model visualization generation
- SHAP plot creation

## 🎨 Frontend Pages

1. **Landing Page** - Introduction and "Get Started"
2. **Career Recommendation** - Input form and prediction results
3. **Insights Page** - XAI analysis and visualizations
4. **Career Evolution** - Timeline visualization of career path
5. **Roadmap Display** - Skills, certifications, and projects

## 🔒 Security Considerations

- CORS enabled for all origins (development mode)
- File type validation for resume uploads
- Input validation using Pydantic schemas
- Error handling with detailed messages
- No sensitive data stored client-side

## 📊 Model Performance Metrics

Performance metrics are visualized in:
- `confusion_matrix.png` - Classification accuracy
- `pr_curve.png` - Precision-Recall tradeoff
- `training_curve.png` - Training/validation performance

## 🚀 Deployment Architecture

```
Production Setup:
- Frontend: Static hosting (Vercel/Netlify) or served by FastAPI
- Backend: Cloud VM or container (AWS/Azure/GCP)
- Models: Loaded in memory or from cloud storage
- Static Files: CDN or local storage
```

## 📚 References

### Diagram Tools
- **Mermaid:** https://mermaid.js.org/
- **Mermaid Live Editor:** https://mermaid.live/

### Documentation
- **FastAPI Docs:** https://fastapi.tiangolo.com/
- **React Docs:** https://react.dev/
- **SHAP Documentation:** https://shap.readthedocs.io/
- **spaCy Docs:** https://spacy.io/
- **Sentence-BERT:** https://www.sbert.net/

## 🔄 Updates & Maintenance

This documentation reflects the system state as of the current implementation. For updates:
1. Regenerate Mermaid diagrams if architecture changes
2. Update endpoint documentation if new APIs are added
3. Refresh screenshots if UI changes significantly
4. Keep technology stack versions updated

---

**Last Updated:** October 27, 2025  
**System Version:** BrightPath v1.0  
**Maintained by:** Development Team
